"use strict";(self.webpackChunkcodec_wiki=self.webpackChunkcodec_wiki||[]).push([[786],{5426:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"metrics/XPSNR","title":"XPSNR","description":"The content in this entry is incomplete & is in the process of being completed.","source":"@site/docs/metrics/XPSNR.mdx","sourceDirName":"metrics","slug":"/metrics/XPSNR","permalink":"/docs/metrics/XPSNR","draft":false,"unlisted":false,"editUrl":"https://github.com/av1-community-contributors/codec-wiki/tree/main/docs/metrics/XPSNR.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"XPSNR","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"VMAF","permalink":"/docs/metrics/VMAF"},"next":{"title":"Butteraugli","permalink":"/docs/metrics/butteraugli"}}');var s=i(4848),r=i(8453);const o={title:"XPSNR",sidebar_position:1},a="XPSNR",l={},c=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Notes",id:"notes",level:2},{value:"Comparing to SSIMULACRA 2",id:"comparing-to-ssimulacra-2",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"xpsnr",children:"XPSNR"})}),"\n",(0,s.jsx)(n.admonition,{title:"Under Maintenance",type:"info",children:(0,s.jsx)(n.p,{children:"The content in this entry is incomplete & is in the process of being completed."})}),"\n",(0,s.jsx)(n.p,{children:"XPSNR is a full-reference distortion measurement algorithm for video quality assessment, based on the concept of the peak signal to noise ratio (PSNR), tuned to better reflect the human visual system."}),"\n",(0,s.jsxs)(n.p,{children:["XPSNR is considered to be a highly reputable visual quality metric according to its correlation with subjective results relative to its impressive speed.\nUnlike image-first metrics like ",(0,s.jsx)(n.a,{href:"/docs/metrics/SSIMULACRA2",children:"SSIMULACRA2"}),", XPSNR is a video-focused metric, and uses temporal information to compute its score."]}),"\n",(0,s.jsxs)(n.p,{children:["The reference implementation by Fraunhofer HHI is a ",(0,s.jsx)(n.a,{href:"https://github.com/fraunhoferhhi/xpsnr",children:"FFmpeg 7.0 plug-in"}),", and there is a ",(0,s.jsx)(n.a,{href:"https://github.com/gianni-rosato/sxpsnr",children:"community-built standalone implementation"})," available as well.\nFor more details about the algorithm and its design, ",(0,s.jsx)(n.a,{href:"https://www.itu.int/pub/S-JOURNAL-ICTS.V3I1-2020-8",children:"a scientific paper is available"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"XPSNR comes as an FFmpeg 7.0 plug-in. The process of installing it is somewhat straightforward:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Download the source code for FFmpeg 7.0:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone -b release/7.0 https://git.ffmpeg.org/ffmpeg.git ffmpeg\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Download the code for the XPSNR plug-in:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/fraunhoferhhi/xpsnr\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Copy the plug-in files from XPSNR's code to FFmpeg's:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cp xpsnr/libavfilter/* ffmpeg/libavfilter/\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:"Configure and compile FFmpeg:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ffmpeg\n./configure ...\nmake -j $(nproc)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.p,{children:"XPSNR is used as an FFmpeg filter, similarly to the built-in PSNR plugin:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'./ffmpeg -i ref.mkv -i test.mkv -lavfi xpsnr="stats_file=xpsnr.log" -f null -\n'})}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Being the reference implementation an FFmpeg plug-in and not a standalone binary is inconvenient for some workflows.\nCurrently, there are some attempts at making a ",(0,s.jsx)(n.a,{href:"https://github.com/gianni-rosato/sxpsnr",children:"standalone XPSNR binary"}),", although they are not very widespread yet."]}),"\n",(0,s.jsxs)(n.li,{children:["XPSNR uses a PSNR-like scoring system: a logarithmic scale in range 0..inf.\nThis is considerably harder to interpret than other metrics (e.g. ",(0,s.jsx)(n.a,{href:"/docs/metrics/SSIMULACRA2",children:"SSIMULACRA 2"})," or ",(0,s.jsx)(n.a,{href:"/docs/metrics/VMAF",children:"VMAF"}),");\nand the threshold to what constitutes good quality is content-dependent.\n(Preliminary testing seems to indicate that anything above a XPSNR score of 42.00 is visually lossless.)"]}),"\n",(0,s.jsxs)(n.li,{children:['XPSNR scores are computed independently for the luma (Y) and two chroma (U, V) components of videos,\nthus actually providing 3 scores.\nAlthough the developers argue that using the minimum of these 3 scores as "definitive score"\n(i.e. better correlates to human impressions),\nsome people in the community prefer using a weighted sum: ',(0,s.jsx)(n.code,{children:"(4 * XPSNR_Y + XPSNR_U + XPSNR_V) / 6"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"comparing-to-ssimulacra-2",children:"Comparing to SSIMULACRA 2"}),"\n",(0,s.jsx)(n.p,{children:"The main advantage of XPSNR over SSIMULACRA 2 is that it is considerably faster to compute.\nXPSNR can achieve real-time speeds for 1080p 24 fps video, making it more convenient to quickly compare test encodes."}),"\n",(0,s.jsx)(n.p,{children:"Regarding their visual assessment capabilities, XPSNR and SSIMULACRA 2 seem to complement each other quite well,\nhaving both their own strong points and weak points with specific video content.\nIf possible, using both at the same time provides great benefits for video quality assessment and comparison."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);