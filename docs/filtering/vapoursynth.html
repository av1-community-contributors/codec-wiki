<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-filtering/vapoursynth" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Vapoursynth | Codec Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.x266.mov/img/codec-wiki-social-card.webp"><meta data-rh="true" name="twitter:image" content="https://wiki.x266.mov/img/codec-wiki-social-card.webp"><meta data-rh="true" property="og:url" content="https://wiki.x266.mov/docs/filtering/vapoursynth"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Vapoursynth | Codec Wiki"><meta data-rh="true" name="description" content="VapourSynth is an application for video manipulation. Or a plugin. Or a library. It’s hard to tell because it has a core library written in C++ and a Python module to allow video scripts to be created."><meta data-rh="true" property="og:description" content="VapourSynth is an application for video manipulation. Or a plugin. Or a library. It’s hard to tell because it has a core library written in C++ and a Python module to allow video scripts to be created."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://wiki.x266.mov/docs/filtering/vapoursynth"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/filtering/vapoursynth" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/filtering/vapoursynth" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Vapoursynth","item":"https://wiki.x266.mov/docs/filtering/vapoursynth"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Codec Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Codec Wiki Atom Feed">






<link rel="preload" href="static/fonts/Inter.var.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="static/fonts/Mona-Sans.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="static/fonts/Monaspace-Neon.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://analytics.x266.mov/js/script.js" defer="defer" data-domain="wiki.x266.mov"></script><link rel="stylesheet" href="/assets/css/styles.cc785465.css">
<script src="/assets/js/runtime~main.2a71ad56.js" defer="defer"></script>
<script src="/assets/js/main.a55df174.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Codec Wiki</b></a><a class="navbar__item navbar__link" href="/docs/introduction/prologue">Get Started</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://discord.gg/bbQD5MjDr3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord"></a><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/introduction/prologue">💡 Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/audio/intro">🔊 Audio</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/video/AVC">📹️ Video</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/data/zip">💽 Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/images/JPEG">🏞️ Images</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/encoders/x264">💾 Encoders</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/encoders_hw/nvenc">🚀 Hardware Encoders</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/subtitles/SRT">💬 Subtitles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/filtering/vapoursynth">🎞️ Filtering</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/filtering/vapoursynth">Vapoursynth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/basics">Basics of Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/ivtc">Inverse Telecine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/deinterlace">Deinterlace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/decombing">Decombing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/stabilizing">Stabilizing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/denoise">Denoise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/dehalo">Dehalo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/antialiasing">Antialiasing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/deband">Deband</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filtering/graining">Graining</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/colorimetry/intro">🎨 Colorimetry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/utilities/Aviator">🛠️ Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/metrics/PSNR">👁️ Metrics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-players">▶️ Video Players</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/resources">🗃️ Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribution-guide">✒️ Contribution Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/FAQ">❓ FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/privacy-policy">🔏 Privacy Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/terms-of-use">🤝 Terms of Use</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">🎞️ Filtering</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Vapoursynth</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Vapoursynth</h1></header>
<blockquote>
<p>VapourSynth is an application for video manipulation. Or a plugin. Or a library. It’s hard to tell because it has a core library written in C++ and a Python module to allow video scripts to be created.</p>
</blockquote>
<p><em>Fredrik Mellbin, creator of VapourSynth</em></p>
<picture><source srcset="https://raw.githubusercontent.com/av1-community-contributors/images/main/vs_edit_script.avif?token=GHSAT0AAAAAACEZPDXJ6SHSUQIMUOGQXQTEZHY7K4A" type="image/avif"><img src="https://autumn.revolt.chat/attachments/g7DucEq3aRGWVH0MHQe-A21GkyDVln9IHzRlfjEYEh/vs_edit_script.png" alt="Vapoursynth script" width="520" height="632"></picture>
<!-- --> <!-- -->
<h1>Introduction</h1>
<p>In the realm of video processing, one will frequently encounter media with various quality issues. These can range from minor imperfections to significant degradation, including:</p>
<ul>
<li>Excessive film grain or noise that significantly increases bitrate due to its unpredictable nature</li>
<li>Visible banding artifacts</li>
<li>Unwanted halos around objects</li>
<li>Interlacing issues in older, unrestored footage</li>
<li>Telecine artifacts from improper film-to-video conversion</li>
<li>And more, on our <a href="/docs/introduction/video-artifacts">video artifacts</a> page.</li>
</ul>
<p>To address these challenges, video filtering techniques are employed. Currently, there are three primary software frameworks used for video filtering:</p>
<ol>
<li><a href="/docs/utilities/ffmpeg">FFmpeg</a></li>
<li><a href="https://vapoursynth.com" target="_blank" rel="noopener noreferrer">VapourSynth</a></li>
<li><a href="http://avisynth.nl/index.php/Main_Page" target="_blank" rel="noopener noreferrer">AviSynth</a></li>
</ol>
<p>VapourSynth is designed as a 21st-century upgrade and rewrite of AviSynth, which was originally created by Ben Rudiak-Gould, Edwin van Eggelen, Klaus Post, Richard Berg, and Ian Brabham in May 2000. One of the most attractive features of this complete rewrite is its improved multithreading capability, an area where AviSynth struggled due to its aging infrastructure.</p>
<p>Some longtime AviSynth users are reluctant to switch to VapourSynth, preferring to stick with a familiar workflow. There is nothing wrong with this preference, as both tools have their merits in video processing; that being said, the Codec Wiki&#x27;s <em>Filtering</em> section focuses primarily on VapourSynth (and occaisonally FFmpeg). It is important to note that working with VapourSynth requires a basic understanding of Python, as the filtering process involves scripting.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-windows">Microsoft Windows<a href="#microsoft-windows" class="hash-link" aria-label="Direct link to Microsoft Windows" title="Direct link to Microsoft Windows">​</a></h3>
<ul>
<li>At the time of writing, Python 3.12 is required. This will change in the future so consult from <a href="http://www.vapoursynth.com/doc/installation.html" target="_blank" rel="noopener noreferrer">their website</a></li>
<li>Download the installer (<code>.exe</code>) unless you require portability</li>
<li>Install it</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arch-linux">Arch Linux<a href="#arch-linux" class="hash-link" aria-label="Direct link to Arch Linux" title="Direct link to Arch Linux">​</a></h3>
<p>Currently, Arch is the best Linux distribution for working with Vapoursynth due to the fact that
the vast majority of filters and plugins are available in the AUR. This makes installing and updating filters easy.
If you are not already, we recommend using an AUR helper such as
<a href="https://github.com/Morganamilo/paru" target="_blank" rel="noopener noreferrer">paru</a> or <a href="https://github.com/Jguer/yay" target="_blank" rel="noopener noreferrer">yay</a>.</p>
<p>To install vapoursynth, simply install the <code>vapoursynth</code> package from the official repositories using pacman or your preferred AUR helper.</p>
<p>Plugins are all prefixed with <code>vapoursynth-plugin-</code>, such as <code>vapoursynth-plugin-lsmashsource-git</code>, and as such can be discovered easily.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-linux">Other Linux<a href="#other-linux" class="hash-link" aria-label="Direct link to Other Linux" title="Direct link to Other Linux">​</a></h3>
<p>Vapoursynth is supported on all Linux distributions. Installation methods may vary by distribution.</p>
<p>Contributions would be helpful to provide instructions for more distributions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="previewing">Previewing<a href="#previewing" class="hash-link" aria-label="Direct link to Previewing" title="Direct link to Previewing">​</a></h2>
<p>There are currently two leading previewers for Vapoursynth. If you want to preview your scripts with capabilities such as seeking,
you will need to use one of these applications.</p>
<p>The first is YomkioR&#x27;s <a href="https://github.com/YomikoR/VapourSynth-Editor/" target="_blank" rel="noopener noreferrer">Vapoursynth Editor</a>, which includes a built-in code editor alongside a video previewer.
This makes it extremely easy to set up for users who are new to Vapoursynth.</p>
<p>The second is JET&#x27;s fork of <a href="https://github.com/Jaded-Encoding-Thaumaturgy/vs-preview" target="_blank" rel="noopener noreferrer">vs-preview</a>, which is a standalone previewer with utilities for
tasks such as cropping, screenshotting, and uploading comparisons. This tool is more advanced than Vapoursynth Editor, but does not include an editor,
so you will need to pair it with an editor such as Visual Studio Code. The Github for vs-preview includes instructions for setting this up.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Direct link to Output" title="Direct link to Output">​</a></h2>
<p>Vapoursynth provides a command-line utility called <code>vspipe</code> for outputting filtered video. Using this utility to pipe y4m video
is the most common way to use Vapoursynth with an encoder.</p>
<p>For example, the following command would pipe the output from a Vapoursynth script into x264:</p>
<p><code>vspipe -c y4m input.vpy - | x264 --demuxer y4m -o output.mkv -</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-filters">Source Filters<a href="#source-filters" class="hash-link" aria-label="Direct link to Source Filters" title="Direct link to Source Filters">​</a></h2>
<p>For Vapoursynth to produce output, it has to load a video in some way. This way is with source filters.</p>
<p>The most basic method is using <code>BlankClip</code> to create a clip of a certain resolution and frame rate. For example, the following
script would give us a blank clip at 640x480:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> vapoursynth </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">std</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BlankClip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">width</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">640</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">480</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>But a plain black video isn&#x27;t very useful, is it? We want to load real videos so we can do filtering on them.
For this, there are a few different source filters we can look at.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsmashsource">LSmashSource<a href="#lsmashsource" class="hash-link" aria-label="Direct link to LSmashSource" title="Direct link to LSmashSource">​</a></h3>
<p><a href="https://github.com/HomeOfAviSynthPlusEvolution/L-SMASH-Works" target="_blank" rel="noopener noreferrer">LSmashSource</a> is a source filter using lsmash as the underlying source library.
It is the most commonly used source filter, and is generally reliable for most source formats, though may have frame accuracy issues
when seeking with certain input formats, such as VC-1. If this is a concern, it can be recommended to encode to lossless first before
using any encoding methods that require seeking, such as av1an.</p>
<p>Here is an example of loading a video file using LSmashSource:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> vapoursynth </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lsmas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LWLibavSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;input.mkv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ffms2">ffms2<a href="#ffms2" class="hash-link" aria-label="Direct link to ffms2" title="Direct link to ffms2">​</a></h3>
<p><a href="https://github.com/FFMS/ffms2" target="_blank" rel="noopener noreferrer">ffms2</a> is a source filter based on ffmpeg. It generally should give the same results as LSmashSource,
especially when using the git version which has fixed support for newer formats such as AV1. If having issues with a source file with LSmashSource,
ffms2 can be a good fallback to try.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> vapoursynth </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ffms2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Source</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;input.mkv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bestsource">BestSource<a href="#bestsource" class="hash-link" aria-label="Direct link to BestSource" title="Direct link to BestSource">​</a></h3>
<p><a href="https://github.com/vapoursynth/bestsource/" target="_blank" rel="noopener noreferrer">BestSource</a> is also based on ffmpeg, but uses additional techniques
to ensure frame accuracy in all scenarios with all input formats. The downside is that it must decode the entire video
during indexing, which means the first load of a given video will take longer. Subsequent loads will be quick, because
BestSource caches the index in a file.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> vapoursynth </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VideoSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;input.mkv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cachepath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clip</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>We add the <code>cachepath=&quot;/&quot;</code> setting to emulate the behavior of the other source filters, which is to place the index file next to the source video.
This helps with portability and cleaning up after ourselves. The default behavior is to place the index file in a temporary directory local to the machine.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main/docs/filtering/vapoursynth.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/subtitles/webvtt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">WebVTT</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/filtering/basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Basics of Filtering</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#microsoft-windows" class="table-of-contents__link toc-highlight">Microsoft Windows</a></li><li><a href="#arch-linux" class="table-of-contents__link toc-highlight">Arch Linux</a></li><li><a href="#other-linux" class="table-of-contents__link toc-highlight">Other Linux</a></li></ul></li><li><a href="#previewing" class="table-of-contents__link toc-highlight">Previewing</a></li><li><a href="#output" class="table-of-contents__link toc-highlight">Output</a></li><li><a href="#source-filters" class="table-of-contents__link toc-highlight">Source Filters</a><ul><li><a href="#lsmashsource" class="table-of-contents__link toc-highlight">LSmashSource</a></li><li><a href="#ffms2" class="table-of-contents__link toc-highlight">ffms2</a></li><li><a href="#bestsource" class="table-of-contents__link toc-highlight">BestSource</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Getting Started</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.x266.mov/docs/introduction/prologue" target="_blank" rel="noopener noreferrer" class="footer__link-item">Prologue</a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/audio/AAC" target="_blank" rel="noopener noreferrer" class="footer__link-item">AAC</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Filtering</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/Vapoursynth" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vapoursynth<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/deband" target="_blank" rel="noopener noreferrer" class="footer__link-item">Deband<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/denoise" target="_blank" rel="noopener noreferrer" class="footer__link-item">Denoise<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Gianni Rosato & contributors. Content licensed under CC BY-SA 4.0. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>