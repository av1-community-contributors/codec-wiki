<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-encoders/x265" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">x265 | Codec Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.x266.mov/img/codec-wiki-social-card.webp"><meta data-rh="true" name="twitter:image" content="https://wiki.x266.mov/img/codec-wiki-social-card.webp"><meta data-rh="true" property="og:url" content="https://wiki.x266.mov/docs/encoders/x265"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="x265 | Codec Wiki"><meta data-rh="true" name="description" content="x265 is a software library and command line application for encoding H.265 / HEVC developed by MulticoreWare, written in C++ and x86 assembly, and released in 2013."><meta data-rh="true" property="og:description" content="x265 is a software library and command line application for encoding H.265 / HEVC developed by MulticoreWare, written in C++ and x86 assembly, and released in 2013."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://wiki.x266.mov/docs/encoders/x265"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/encoders/x265" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/encoders/x265" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"x265","item":"https://wiki.x266.mov/docs/encoders/x265"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Codec Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Codec Wiki Atom Feed">






<link rel="preload" href="static/fonts/Inter.var.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="static/fonts/Mona-Sans.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="static/fonts/Monaspace-Neon.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://analytics.x266.mov/js/script.js" defer="defer" data-domain="wiki.x266.mov"></script><link rel="stylesheet" href="/assets/css/styles.cc785465.css">
<script src="/assets/js/runtime~main.2a71ad56.js" defer="defer"></script>
<script src="/assets/js/main.a55df174.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Codec Wiki</b></a><a class="navbar__item navbar__link" href="/docs/introduction/prologue">Get Started</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://discord.gg/bbQD5MjDr3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord"></a><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/introduction/prologue">💡 Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/audio/intro">🔊 Audio</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/video/AVC">📹️ Video</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/data/zip">💽 Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/images/JPEG">🏞️ Images</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/encoders/x264">💾 Encoders</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/x264">x264</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/encoders/x265">x265</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/x266">x266</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/aomenc">aomenc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-AV1-PSY">SVT-AV1-PSY</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-AV1">SVT-AV1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/rav1e">rav1e</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/Aurora1">Aurora1 AV1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/vpxenc">vpxenc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-VP9">SVT-VP9</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-HEVC">SVT-HEVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/Kvazaar">Kvazaar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/VVenC">VVenC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/uvg266">uvg266</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/VTM">VTM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/AVM">AVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/HM">HM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/JM">JM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/aom-av1-lavish">aom-av1-lavish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/aom-psy101">aom-psy101</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/uavs3e">uavs3e</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/eve-vp9">Eve-VP9</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/eve-av1">Eve-AV1</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/encoders_hw/nvenc">🚀 Hardware Encoders</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/subtitles/SRT">💬 Subtitles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/filtering/vapoursynth">🎞️ Filtering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/colorimetry/intro">🎨 Colorimetry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/utilities/Aviator">🛠️ Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/metrics/PSNR">👁️ Metrics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-players">▶️ Video Players</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/resources">🗃️ Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribution-guide">✒️ Contribution Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/FAQ">❓ FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/privacy-policy">🔏 Privacy Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/terms-of-use">🤝 Terms of Use</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">💾 Encoders</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">x265</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>x265</h1></header>
<p>x265 is a software library and command line application for encoding <a href="/docs/video/HEVC">H.265 / HEVC</a> developed by MulticoreWare, written in C++ and x86 assembly, and released in 2013.</p>
<p>By default, x265 is tuned for low-bitrate content due to the blurring filters it applies, but it can be tuned for high fidelity as well and excels at it.</p>
<p>x265 is currently not recommended for lossless encoding. For that niche, x264 is considerably faster without meaningful efficiency loss.</p>
<h1>FFmpeg</h1>
<p>x265 is available in FFmpeg via <code>libx265</code>, to check if you have it, run <code>ffmpeg -h encoder=libx265</code>.</p>
<h1>Installation</h1>
<p><strong>Pre-built binary (Recommended):</strong></p>
<ul>
<li><a href="http://msystem.waw.pl/x265/" target="_blank" rel="noopener noreferrer">http://msystem.waw.pl/x265/</a></li>
</ul>
<h1>Parameters</h1>
<p>This section will overview the most important parameters for controlling output and quality in x265. The parameters will be listed in the format used by the standalone x265 binary,
but all the parameters should also be usable in FFmpeg in the format e.g. <code>-x265-params pass=1</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preset">Preset<a href="#preset" class="hash-link" aria-label="Direct link to Preset" title="Direct link to Preset">​</a></h2>
<p><code>--preset</code></p>
<p>In x265, we have a preset system to easily control how much effort and therefore time x265 puts into compressing video. This system possesses the following presets:</p>
<p>ultrafast, superfast, faster, fast, medium (default), slow, slower, veryslow and placebo</p>
<p>Generally speaking the further left of medium the preset is, the faster and therefore less efficient the encode is, and the opposite is true for the right side.</p>
<p>It is recommended to pick the slowest preset you can bear to use on your hardware before messing with any of the following settings on this page, as this will be your baseline for encoder performance.</p>
<p>It is not recommended to use the two extremes as ultrafast is terrible in its consistency and you would be better off using something like x264. placebo on the other hand performs slightly worse than
veryslow for reasons that will be explained later.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rate-control">Rate Control<a href="#rate-control" class="hash-link" aria-label="Direct link to Rate Control" title="Direct link to Rate Control">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--crf"><code>--CRF</code><a href="#--crf" class="hash-link" aria-label="Direct link to --crf" title="Direct link to --crf">​</a></h3>
<p>CRF or Constant Rate Factor is the closest thing in x265 to a quality slider for the final encode where a smaller value is higher quality and a larger value is lower quality.
While CRF offers a good overall consistency, the exact quality you get at a specific CRF does still vary by source, although not as much as other methods. Changing specific settings (like psy-rd)
or the preset you&#x27;re using can change the quality at a given CRF. Usually the slower the preset, the higher the quality given a CRF.</p>
<p>Below is a list of rough CRF values to experiment with when targeting a specific quality. This is only rough as it is source and settings dependant as explained earlier.</p>
<table><thead><tr><th>Quality</th><th>720</th><th>1080</th><th>4k</th></tr></thead><tbody><tr><td>Transparent</td><td>14</td><td>16</td><td>18</td></tr><tr><td>High Quality</td><td>18</td><td>22</td><td>24</td></tr><tr><td>Medium Quality</td><td>24</td><td>26</td><td>28</td></tr><tr><td>Low Quality</td><td>28</td><td>30</td><td>32</td></tr></tbody></table>
<p>While not always consistent, x265 aims for an increase of 6 CRF or a decrease of 6 CRF to be a half or doubling of file size, respectively.</p>
<p>CRF is also preferable to other rate control methods due to its consistency in quality and being the most efficient mode of them all.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--bitrate"><code>--bitrate</code><a href="#--bitrate" class="hash-link" aria-label="Direct link to --bitrate" title="Direct link to --bitrate">​</a></h3>
<p><code>--bitrate</code> as the name implies, is used to specify the target ABR for 1-pass encoding or target bitrate for VBR in 2-pass+.</p>
<p>It is highly discouraged to use this rate control unless required, as it is less efficient than CRF and does not keep a consistent quality like CRF either.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threading">Threading<a href="#threading" class="hash-link" aria-label="Direct link to Threading" title="Direct link to Threading">​</a></h2>
<p><code>--wpp</code> and <code>--frame-threads</code></p>
<p>x265 possesses several threading features that each come with their own upsides and downsides when used.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--wpp"><code>--wpp</code><a href="#--wpp" class="hash-link" aria-label="Direct link to --wpp" title="Direct link to --wpp">​</a></h3>
<p><code>--wpp</code> or Wavefront Parallel Processing is the default method x265 uses to parallelize encoding first and foremost. With only an efficiency hit of 1-3% of the final encode, it increases threading of x265
by 3-5x. Unless you&#x27;re using a tool like Av1an for maximum efficiency encoding, it is always recommended to have this setting on (default).</p>
<p>WPP works by splitting the video frame up into rows where the row is 2 CU, or super blocks in libvpx terms, behind the row above it. This allows the encoder to reference everything allowed by the
H.265 specification. Due to it not being single threaded, some optimizations cannot be done, resulting in a small efficiency loss.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--frame-threads"><code>--frame-threads</code><a href="#--frame-threads" class="hash-link" aria-label="Direct link to --frame-threads" title="Direct link to --frame-threads">​</a></h3>
<p><code>--frame-threads</code> is an extension of the idea of wpp across multiple frames being encoded concurrently. Similarly, this results in a further 1-3% efficiency loss, however it can boost threading 5-7x on top of wpp.</p>
<p>According to reports by some users in older versions of x265, the larger the number of frame threads, the worse the efficiency impact. However, in the latest version of x265 4.1, there is no difference
between 2 frame threads and the max 16 threads.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="b-frames">B-frames<a href="#b-frames" class="hash-link" aria-label="Direct link to B-frames" title="Direct link to B-frames">​</a></h2>
<p><code>--bframes</code>, <code>--b-adapt</code>, <code>--bframe-bias</code> and <code>--b-pyramid</code></p>
<p>B-frames are bi-directional predictive frames. This means they can reference either past, future or both types of frames at the same time, making them one of the most efficient types. B-frames
however are usually the most compressed frame types. Referencing other frames rather than storing their own detail (typically) makes them often the worse quality and blurry frames. In total, we
have 4 different settings to control how they are used by the encoder. Usually, you will never touch these.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--bframes"><code>--bframes</code><a href="#--bframes" class="hash-link" aria-label="Direct link to --bframes" title="Direct link to --bframes">​</a></h3>
<p><code>--bframes</code> is used to control the max number of consecutive B-frames the encoder is allowed to use and search for. Generally, the larger this value is to a max of <code>16</code> the slower but more
efficient the encoder becomes. However, in higher fidelity encodes around CRF 18 or lower, beyond 8-12 B-frames can start to hurt detail for the reasons stated above. Likewise, the benefits of
more B-frames vs the time it takes makes it not typically worth it beyond a similar point.</p>
<p>In general, it is best to leave this setting at the default for your preset. However, for content like anime or otherwise flat non IRL, adding +2 B-frames to the current preset generally gives a
small efficiency boost. You can also set it to the max value of 16 for micro encodes to try and squeeze the most efficient possible out of the encoder, if time is no object to you.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--b-adapt"><code>--b-adapt</code><a href="#--b-adapt" class="hash-link" aria-label="Direct link to --b-adapt" title="Direct link to --b-adapt">​</a></h3>
<p><code>--b-adapt</code> controls the method that the encoder uses to decide where to put B-frames. It has 3 different modes.</p>
<table><thead><tr><th>mode</th><th>feature</th></tr></thead><tbody><tr><td>1</td><td>Fixed</td></tr><tr><td>2</td><td>Light lookahead</td></tr><tr><td>3</td><td>Viterbi trellis (default)</td></tr></tbody></table>
<p>It is always recommended to use 3 as it comes at a negligible speed penalty and is the smartest at placing B-frames for maximum efficiency without harming visual fidelity.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--bframe-bias"><code>--bframe-bias</code><a href="#--bframe-bias" class="hash-link" aria-label="Direct link to --bframe-bias" title="Direct link to --bframe-bias">​</a></h3>
<p><code>--bframe-bias</code> as the name implies, is used to control the bias for x265 to use B-frames over other frame types. Normally,you should never touch this setting as the default of <code>0</code> is already
optimal for most cases, however for high fidelity encodes or micro encodes, adjusting this bias can help retain detail or sacrifice spacial detail for better temporal information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--b-pyramid"><code>--b-pyramid</code><a href="#--b-pyramid" class="hash-link" aria-label="Direct link to --b-pyramid" title="Direct link to --b-pyramid">​</a></h3>
<p><code>--b-pyramid</code> or <code>--no-b-pyramid</code> decides if B-frames can be used as reference frames for other B-frames or other frame types. Normally, this should always be on and is the default. However, for
high fidelity encodes, it might be worthwhile experimenting with turning it off only in limited use cases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="restoration-filtering">Restoration Filtering<a href="#restoration-filtering" class="hash-link" aria-label="Direct link to Restoration Filtering" title="Direct link to Restoration Filtering">​</a></h2>
<p><code>--sao</code>, <code>--limit-sao</code>, <code>--no-sao</code> and <code>--deblock</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--sao---limit-sao-and---no-sao"><code>--sao</code>, <code>--limit-sao</code> and <code>--no-sao</code><a href="#--sao---limit-sao-and---no-sao" class="hash-link" aria-label="Direct link to --sao---limit-sao-and---no-sao" title="Direct link to --sao---limit-sao-and---no-sao">​</a></h3>
<p>SAO or Sample Adaptive Offset is a restoration filter in H.265 used to prevent obvious blocking and ringing artifacts, especially around sharp edges.
However, this does sometimes come at the cost of some finer details in the video, like for example human skin and surface details, to be erased.
Generally speaking, at CRF values at or above 20, you can leave this option on, which is default as it does a good job of making the overall video more appealing.</p>
<p>x265 however has a primitive implementation of SAO which tends to be too aggressive at high quality or fidelity ranges, leading to blurring around CRF 19-16.
While it does &quot;limit&quot; how much the encoder uses SAO, <code>--limit-sao</code> is more of an early termination for the encoder deciding where to use it rather than limiting its strength.
However, it generally does a good job of preserving more detail than normal, even if it makes some artifacts more noticeable.</p>
<p>For below CRF 16, depending on your content, it might be preferable to outright disable sao with <code>--no-sao</code>, as usually at such high quality it&#x27;s not usually needed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--deblock"><code>--deblock</code><a href="#--deblock" class="hash-link" aria-label="Direct link to --deblock" title="Direct link to --deblock">​</a></h3>
<p>Word of caution, the documentation around the deblock setting is esoteric.</p>
<p>Deblock is another loop filter, this one intended to reduce blocking in videos, but may have a blurring effect at high strengths. For most encodes, it is fine to leave this
at the default value. At lower CRF values, it may be desirable to lower this to <code>--deblock -1:-1</code> for anime or <code>--deblock -2:-2</code> for live action, in order to preserve
more grain and detail.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="psycho-visual-options">Psycho-visual options<a href="#psycho-visual-options" class="hash-link" aria-label="Direct link to Psycho-visual options" title="Direct link to Psycho-visual options">​</a></h2>
<p><code>--psy-rd</code>, <code>--psy-rdoq</code>, <code>--aq-mode</code> and <code>--aq-strength</code></p>
<p>You can read more about the importance of perceptual optimization in video encoders on the <a href="/docs/introduction/psychovisual">psychovisual</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--psy-rd-and---psy-rdoq"><code>--psy-rd</code> and <code>--psy-rdoq</code><a href="#--psy-rd-and---psy-rdoq" class="hash-link" aria-label="Direct link to --psy-rd-and---psy-rdoq" title="Direct link to --psy-rd-and---psy-rdoq">​</a></h3>
<p>To make a long story short, <code>--psy-rd</code> and <code>--psy-rdoq</code> together are psychovisual optimization tools used to control the encoder&#x27;s willingness to retain finer detail and noise in the
final encode. However, the way the two settings achieve this are very different.</p>
<p><code>--psy-rd</code> retains detail by affecting how the encoder weights sections of the frame based off the amount of &quot;energy&quot; or high frequency information it contains and boosts them
accordingly.</p>
<p><code>--psy-rdoq</code> retains detail by affecting how the encoder quantizes coefficients after transformations. It has no reference to the source in its calculation and only prefers retaining overall visual
energy and nothing specific.</p>
<p>Both settings are highly source dependent and ideally would be tweaked per scene in a video. Unless you know what you&#x27;re doing and are willing to test thoroughly that the settings you
are using are beneficial, it&#x27;s almost always recommended to never touch either setting, as the defaults for both are good general purpose settings.
However, as a general rule of thumb, <code>--psy-rd</code> is better at retaining specific detail and overall sharpness while <code>--psy-rdoq</code> is better at retaining overall noise.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--aq-mode-and---aq-strength"><code>--aq-mode</code> and <code>--aq-strength</code><a href="#--aq-mode-and---aq-strength" class="hash-link" aria-label="Direct link to --aq-mode-and---aq-strength" title="Direct link to --aq-mode-and---aq-strength">​</a></h3>
<p>Adaptive quantization (<code>--aq-mode</code>), shortened to AQ, is a mechanism to redistribute bitrate within a frame to improve perceptual quality consistency.
In x265, we have 4 modes.</p>
<table><thead><tr><th>mode</th><th>feature</th></tr></thead><tbody><tr><td>1</td><td>AQ enabled</td></tr><tr><td>2</td><td>AQ with auto variance (default)</td></tr><tr><td>3</td><td>AQ 2 with a bias for dark scenes</td></tr><tr><td>4</td><td>AQ 2 with edge information</td></tr></tbody></table>
<p>Generally speaking, we always want AQ 2 or AQ with auto variance as this will bias both parts of the frame that are smooth and textured. Normally, these parts of the frame are bitrate starved
and have the most noticeable artifacting.</p>
<p>Some people will use AQ 3 to, as the name implies, preserve detail in dark scenes and parts of the frame. However, in metric analysis and visual comparisons, AQ 3 can sometimes bloat bitrates for minor to
no gains. While this is not an entirely useless AQ mode, thorough testing should be done before using it.</p>
<p>The relative strength of an AQ mode can also be controlled with <code>--aq-strength</code>. While the default is <code>1.0</code>, many people do lower it to <code>0.7</code> or <code>0.8</code> for flat anime or compressed IRL content.
In general, like other psychovisual optimization tools in x265, these settings are highly source dependant and are best left at their defaults, unless you know what you are doing and have data
to back it up.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cu-tree">CU-Tree<a href="#cu-tree" class="hash-link" aria-label="Direct link to CU-Tree" title="Direct link to CU-Tree">​</a></h2>
<p><code>--cutree</code> and <code>--no-cutree</code></p>
<p>CU-Tree similar to MB-Tree in x264 is a method for the encoder to keep track of what parts of the frame are used or referenced by future frames. In a sense, it&#x27;s a temporal motion quantizer.
It has been very common for a long time, all the way back when only x264 existed, for people to disable MB-Tree due to the idea that it removed too much detail or blurred the video.
However, a lot of that blur and detail loss would occur in parts of the frame that viewers would not be able to see clearly due to motion, or in areas that didn&#x27;t significantly
contribute to the overall image quality during playback. Both MB-Tree and CU-tree have also gotten a lot better since their original implementation making it almost
always worse to disable them rather than to keep them enabled.</p>
<p>Anyone telling you to disable either must provide evidence of it being actually better.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main/docs/encoders/x265.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/encoders/x264"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">x264</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/encoders/x266"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">x266</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preset" class="table-of-contents__link toc-highlight">Preset</a></li><li><a href="#rate-control" class="table-of-contents__link toc-highlight">Rate Control</a><ul><li><a href="#--crf" class="table-of-contents__link toc-highlight"><code>--CRF</code></a></li><li><a href="#--bitrate" class="table-of-contents__link toc-highlight"><code>--bitrate</code></a></li></ul></li><li><a href="#threading" class="table-of-contents__link toc-highlight">Threading</a><ul><li><a href="#--wpp" class="table-of-contents__link toc-highlight"><code>--wpp</code></a></li><li><a href="#--frame-threads" class="table-of-contents__link toc-highlight"><code>--frame-threads</code></a></li></ul></li><li><a href="#b-frames" class="table-of-contents__link toc-highlight">B-frames</a><ul><li><a href="#--bframes" class="table-of-contents__link toc-highlight"><code>--bframes</code></a></li><li><a href="#--b-adapt" class="table-of-contents__link toc-highlight"><code>--b-adapt</code></a></li><li><a href="#--bframe-bias" class="table-of-contents__link toc-highlight"><code>--bframe-bias</code></a></li><li><a href="#--b-pyramid" class="table-of-contents__link toc-highlight"><code>--b-pyramid</code></a></li></ul></li><li><a href="#restoration-filtering" class="table-of-contents__link toc-highlight">Restoration Filtering</a><ul><li><a href="#--sao---limit-sao-and---no-sao" class="table-of-contents__link toc-highlight"><code>--sao</code>, <code>--limit-sao</code> and <code>--no-sao</code></a></li><li><a href="#--deblock" class="table-of-contents__link toc-highlight"><code>--deblock</code></a></li></ul></li><li><a href="#psycho-visual-options" class="table-of-contents__link toc-highlight">Psycho-visual options</a><ul><li><a href="#--psy-rd-and---psy-rdoq" class="table-of-contents__link toc-highlight"><code>--psy-rd</code> and <code>--psy-rdoq</code></a></li><li><a href="#--aq-mode-and---aq-strength" class="table-of-contents__link toc-highlight"><code>--aq-mode</code> and <code>--aq-strength</code></a></li></ul></li><li><a href="#cu-tree" class="table-of-contents__link toc-highlight">CU-Tree</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Getting Started</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.x266.mov/docs/introduction/prologue" target="_blank" rel="noopener noreferrer" class="footer__link-item">Prologue</a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/audio/AAC" target="_blank" rel="noopener noreferrer" class="footer__link-item">AAC</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Filtering</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/Vapoursynth" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vapoursynth<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/deband" target="_blank" rel="noopener noreferrer" class="footer__link-item">Deband<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/filtering/denoise" target="_blank" rel="noopener noreferrer" class="footer__link-item">Denoise<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/av1-community-contributors/codec-wiki/tree/main" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://wiki.x266.mov/docs/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Gianni Rosato & contributors. Content licensed under CC BY-SA 4.0. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>