<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-encoders/aomenc">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">aomenc | Codec Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.x266.mov/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wiki.x266.mov/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wiki.x266.mov/docs/encoders/aomenc"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="aomenc | Codec Wiki"><meta data-rh="true" name="description" content="The content in this entry is incomplete &amp; is in the process of being completed."><meta data-rh="true" property="og:description" content="The content in this entry is incomplete &amp; is in the process of being completed."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://wiki.x266.mov/docs/encoders/aomenc"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/encoders/aomenc" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.x266.mov/docs/encoders/aomenc" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.fa548e7b.css">
<link rel="preload" href="/assets/js/runtime~main.77d18074.js" as="script">
<link rel="preload" href="/assets/js/main.b40a07c3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.svg" alt="AV1 &quot;Stonks&quot; logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Codec Wiki</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/prequisites">üó≥Ô∏è Prequisites</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/introduction/prologue">üí° Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/audio/AAC">üîä Audio</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/video/h264">üìπÔ∏è Video</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Data/zip">üíΩ Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/images/jpeg">üèûÔ∏è Images</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/encoders/x264">üíæ Encoders</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/x264">x264</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/x265">x265</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/encoders/aomenc">aomenc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/vpxenc">vpxenc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-AV1">SVT-AV1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/rav1e">rav1e</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/Kvaazar">Kvaazar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/aurora1">Aurora1 AV1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-HEVC">SVT-HEVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/SVT-VP9">SVT-VP9</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/VVenC">VVenC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/uvg266">uvg266</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/VTM">VTM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/AVM">AVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/HM">HM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encoders/JM">JM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/subtitles/SRT">üí¨ Subtitles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/filtering/intro">üéûÔ∏è Filtering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/utilities/Aviator">üõ†Ô∏è Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/metrics/VMAF">üëÅÔ∏è Metrics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/guides/av1_for_dummies">üìù Gudies</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-players">‚ñ∂Ô∏è Video Players</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/resources">üóÉÔ∏è Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribution-guide">‚úíÔ∏è Contribution Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/FAQ">‚ùì FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/privacy-policy">üîè Privacy Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/terms-of-use">ü§ù Terms of Use</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">üíæ Encoders</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">aomenc</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>aomenc</h1><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Under Maintenance</div><div class="admonitionContent_S0QG"><p>The content in this entry is incomplete &amp; is in the process of being completed.</p></div></div><p>aomenc or <strong>libaom</strong> is a command line application for encoding AV1 written in C and Assembly developed by AOMedia, which is also the reference encoder for AV1.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-forks">Choosing forks<a href="#choosing-forks" class="hash-link" aria-label="Direct link to Choosing forks" title="Direct link to Choosing forks">‚Äã</a></h2><p>Mainline aomenc is unfortunately not good, as it suffers from bad defaults, heavy focus on PSNR which reduces its psycho-visual capabilities, clickbait (or should I call, &quot;usebait&quot;) settings that does X instead of Y, among others. Fortunately two forks were created to combat these, first there&#x27;s <a href="https://github.com/BlueSwordM/aom-av1-psy" target="_blank" rel="noopener noreferrer">aom-av1-psy</a> which was created by BlueSwordM. But it is no longer maintained as of 13th January 2023, another fork called <a href="https://github.com/Clybius/aom-av1-lavish" target="_blank" rel="noopener noreferrer">aom-av1-lavish</a> was then created off of it by Clybius to continue on the legacy.</p><p>These forks fix up the horrid decisions made by the original AOM devs and most importantly introduce new parameters and tunes to help fine tune (haha get it? sorry ill see myself out) the encoder more. TL;DR use <a href="https://github.com/Clybius/aom-av1-lavish" target="_blank" rel="noopener noreferrer">aom-av1-lavish</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ffmpeg">FFmpeg<a href="#ffmpeg" class="hash-link" aria-label="Direct link to FFmpeg" title="Direct link to FFmpeg">‚Äã</a></h2><p>aomenc is available in FFmpeg via <code>libaom-av1</code>, check if you have it by running <code>ffmpeg -h encoder=libaom-av1</code>. You can input non-FFmpeg standard aomenc parameters via <code>-aom-params</code>.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Mainline aomenc</div><div class="admonitionContent_S0QG"><p>Since FFmpeg encoder libraries come as the most default, barebones as possible (Therefore mainline aomenc), it is not recommended to use it. Unless you build it yourself.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-windows">Microsoft Windows<a href="#microsoft-windows" class="hash-link" aria-label="Direct link to Microsoft Windows" title="Direct link to Microsoft Windows">‚Äã</a></h3><p><strong>The Easy Way:</strong> Download the pre-built versions, which can be found below:</p><p><a href="https://cdn.discordapp.com/attachments/1042536514783023124/1069212358989336626/aomenc-skylake.7z" target="_blank" rel="noopener noreferrer">Skylake build</a></p><p><a href="https://cdn.discordapp.com/attachments/1042536514783023124/1069198775899398234/aomenc.7z" target="_blank" rel="noopener noreferrer">Zen 2 build</a></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Updating and compiling</div><div class="admonitionContent_S0QG"><p>Join the <a href="https://discord.gg/vpREHAvYvh" target="_blank" rel="noopener noreferrer">AV1 Discord server</a> and head to #community-builds for updated versions, you can opt to compile it yourself with those custom (Butteraugli, VMAF) tunes but its a huge PITA on Windows.</p></div></div><p><strong>The Compiling Route:</strong></p><p>Tools needed: Visual Studio (Any), Git, CMake, nasm (or yasm for 32bit)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/Clybius/aom-av1-lavish -b Endless_Merging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom-av1-lavish </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p aom_build </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom_build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"> -DBUILD_SHARED_LIBS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_DOCS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_TUNE_BUTTERAUGLI</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_TUNE_VMAF</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_AV1_DECODER</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_TESTS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCMAKE_BUILD_TYPE</span><span class="token operator">=</span><span class="token plain">Release -DCMAKE_CXX_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"> -DCMAKE_C_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native -pipe -fno-plt&quot;</span><span class="token plain"> -DCMAKE_LD_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake --build </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> -j </span><span class="token number">16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Built files should be in the &quot;Debug&quot; folder</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="macos">MacOS<a href="#macos" class="hash-link" aria-label="Direct link to MacOS" title="Direct link to MacOS">‚Äã</a></h3><p>macOS is very similar to Linux. Note that some commands may have to be run with <code>sudo</code>, which I won&#x27;t explicitly include for security reasons.</p><p><strong>Homebrew</strong></p><p>Installing the Homebrew package manager is a well documented process at this point:</p><div class="language-zsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-zsh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Installing mainline libaom is as simple as running the following:</p><div class="language-zsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-zsh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">brew update &amp;&amp; brew upgrade</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brew install aom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>FFmpeg can also be installed via brew.</p><p><strong>Building From Source</strong></p><p>If you want aom-av1-lavish instead of mainline, you&#x27;ll have to compile from source. Things are very similar to Linux, with a few oddities:</p><ul><li>macOS sometimes doesn&#x27;t have a <code>/usr/local/bin</code> by default. You can fix this by doing <code>mkdir /usr/local/bin</code>.</li><li>Homebrew installs <em>everything</em> in its own directory structure. If you&#x27;re building things from source that rely on libraries from libvmaf, libjxl, etc, make sure to copy them from <code>/opt/homebrew/lib</code> to <code>/usr/local/lib</code>. Finding them is a matter of <code>ls | grep &quot;keyword&quot;</code> &amp; copying what looks reasonable to be associated with the tool you&#x27;re using.</li><li>Building most things from source will have instructions for <!-- -->*<!-- -->nix which work for both macOS &amp; Linux. Even if it says Linux, there&#x27;s a good chance it&#x27;ll work on macOS as well, &amp; it is always worth trying Linux build instructions on Mac. aom-av1-lavish requires some additional steps, though.</li></ul><p>If you want to make the most out of your hardware &amp; eke out every last drop of quality, it may be worth building aom-av1-lavish from source. The first step is to clone it from the Endless Merging branch, which contains all of the latest lavish improvements:</p><div class="language-zsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-zsh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/Clybius/aom-av1-lavish -b Endless_Merging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd aom-av1-lavish</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you need to make some manual changes to the source code until <a href="https://github.com/Clybius/aom-av1-lavish/pull/1/files" target="_blank" rel="noopener noreferrer">this commit</a> is merged to fix build errors.</p><ul><li>Add the line <code>#include &quot;aq_variance.h&quot;</code> at line 19 in <code>av1/encoder/encodeframe_utils.c</code></li><li>Comment out line 2546 in <code>av1/encoder/speed_features.c</code>. This line is <code>const int qindex_thresh_cdef_sf_s1_s3_l2[2] = { 92, 48 };</code> &amp; becomes <code>// const int qindex_thresh_cdef_sf_s1_s3_l2[2] = { 92, 48 };</code>.</li></ul><p>Now you can continue to build according to the Linux instructions below. Obviously you&#x27;ll need cmake, which you can install with homebrew along with any other tools. While still in the <code>aom-av1-lavish</code> directory:</p><div class="language-zsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-zsh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p aom_build &amp;&amp; cd aom_build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake .. -DBUILD_SHARED_LIBS=0 -DENABLE_DOCS=0 -DCONFIG_TUNE_BUTTERAUGLI=0 -DCONFIG_TUNE_VMAF=0 -DCONFIG_AV1_DECODER=0 -DENABLE_TESTS=0 -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS=&quot;-flto -O3 -march=native&quot; -DCMAKE_C_FLAGS=&quot;-flto -O3 -march=native -pipe -fno-plt&quot; -DCMAKE_LD_FLAGS=&quot;-flto -O3 -march=native&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make -j$(nproc)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># This may need to be run as root. If it doesn&#x27;t work properly, you can always copy the binary into /usr/local/bin manually:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you can run <code>aomenc --help | grep &quot;AOMedia&quot; -C 3</code> to see if lavish installed. If you&#x27;re getting the same output as above, you may need to copy the <code>aomenc</code> executable to <code>/opt/local/bin</code>, <code>/usr/local/bin</code>, &amp; <code>/opt/homebrew/bin</code> if you already installed mainline aomenc. Running the version info command again, the correct output should look something like this:</p><div class="language-zsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-zsh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">% aomenc --help | grep AOMedia -C 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Included encoders:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    av1    - AOMedia Project AV1 Encoder Psy v3.6.0 (default)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Use --codec to switch to a non-default encoder.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice how it says <code>AOMedia Project AV1 Encoder Psy</code> instead of <code>AOMedia Project AV1 Encoder</code>. You should be all set after this to start using aom-av1-lavish.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux">Linux<a href="#linux" class="hash-link" aria-label="Direct link to Linux" title="Direct link to Linux">‚Äã</a></h3><p>You know what to do, so I&#x27;ll just list the things you&#x27;ll need: <code>Vapoursynth, Av1an, FFmpeg, mkvtoolnix, Git, Perl, CMake, Ninja, Meson, Nasm, Rust (USE RUSTUP ON DEBIAN/UBUNTU), Highway (libhwy)</code></p><p><strong>Compiling aom-av1-lavish (Basic, recommended for beginners)</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/Clybius/aom-av1-lavish -b Endless_Merging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom-av1-lavish </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p aom_build </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom_build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"> -DBUILD_SHARED_LIBS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_DOCS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_TUNE_BUTTERAUGLI</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_TUNE_VMAF</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_AV1_DECODER</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_TESTS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCMAKE_BUILD_TYPE</span><span class="token operator">=</span><span class="token plain">Release -DCMAKE_CXX_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"> -DCMAKE_C_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native -pipe -fno-plt&quot;</span><span class="token plain"> -DCMAKE_LD_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> -j</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">nproc</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Compiling aom-av1-lavish (Full)</strong></p><ol><li>VMAF shenanigans</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/Netflix/vmaf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> vmaf/libvmaf </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> build </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">meson </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"> --buildtype</span><span class="token operator">=</span><span class="token plain">release --default-library</span><span class="token operator">=</span><span class="token plain">both -Db_lto</span><span class="token operator">=</span><span class="token plain">true -Dc_args</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-march=native&quot;</span><span class="token plain"> -Dcpp_args</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-march=native&quot;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> ninja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> ninja </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Copy VMAF models (Assuming user cloned in $HOME)</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> -r /home/</span><span class="token environment constant" style="color:rgb(189, 147, 249)">$USER</span><span class="token plain">/vmaf/model /usr/share</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Install libjxl libraries</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/libjxl/libjxl </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> libjxl </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x deps.sh </span><span class="token operator">&amp;&amp;</span><span class="token plain"> ./deps.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> build </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake -DCMAKE_BUILD_TYPE</span><span class="token operator">=</span><span class="token plain">Release -DCMAKE_CXX_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-O3 -march=native&quot;</span><span class="token plain"> -DCMAKE_C_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-O3 -march=native&quot;</span><span class="token plain"> -DJPEGXL_ENABLE_PLUGINS</span><span class="token operator">=</span><span class="token plain">ON -DJPEGXL_ENABLE_DEVTOOLS</span><span class="token operator">=</span><span class="token plain">ON -DJPEGXL_WARNINGS_AS_ERRORS</span><span class="token operator">=</span><span class="token plain">OFF -DJPEGXL_ENABLE_SJPEG</span><span class="token operator">=</span><span class="token plain">OFF  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> cmake --build </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> -- -j</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">nproc</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Install aom-av1-lavish</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/Clybius/aom-av1-lavish -b Endless_Merging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom-av1-lavish </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p aom_build </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> aom_build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"> -DBUILD_SHARED_LIBS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_DOCS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCONFIG_TUNE_BUTTERAUGLI</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> -DCONFIG_TUNE_VMAF</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> -DCONFIG_AV1_DECODER</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DENABLE_TESTS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> -DCMAKE_BUILD_TYPE</span><span class="token operator">=</span><span class="token plain">Release -DCMAKE_CXX_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"> -DCMAKE_C_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native -pipe -fno-plt&quot;</span><span class="token plain"> -DCMAKE_LD_FLAGS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-flto -O3 -march=native&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> -j</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">nproc</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Branches</div><div class="admonitionContent_S0QG"><p><code>Endless_Butter</code> used to be bleeding edge but now it&#x27;s been taken over by <code>Endless_Merging</code>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="av1-encoding">AV1 Encoding<a href="#av1-encoding" class="hash-link" aria-label="Direct link to AV1 Encoding" title="Direct link to AV1 Encoding">‚Äã</a></h3><p>the</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avif-encoding">AVIF Encoding<a href="#avif-encoding" class="hash-link" aria-label="Direct link to AVIF Encoding" title="Direct link to AVIF Encoding">‚Äã</a></h3><p>Using aomenc through avifenc is widely considered to be the best way to encode AVIF images, as SVT-AV1 only supports 4:2:0 chroma subsampling, rav1e isn&#x27;t fast enough for still images, &amp; the libaom team have put more effort into intra coding than the teams responsible for producing the other prominent open source AV1 encoders. A sample command for encoding AVIF looks like this:</p><p><code>avifenc -c aom -s 4 -j 8 -d 10 -y 444 --min 1 --max 63 -a end-usage=q -a cq-level=16 -a tune=ssim [input] output.avif</code></p><p>Where:</p><ul><li><code>-c aom</code> is the encoder</li><li><code>-s 4</code> is the speed. Speeds 4 &amp; below offer the best compression quality at the expense of longer encode times.</li><li><code>-j 8</code> is the number of threads the encoder is allowed to use. Increasing this past 12 will sometimes hurt encode times, as AVIF encoding via aomenc doesn&#x27;t parallelize perfectly. Test using a speed benchmark to verify which value works best for you.</li><li><code>-d 10</code> is the bit depth. Specifying a value below 10 isn&#x27;t recommended, as it will hurt coding efficiency even with an 8-bit source image.</li><li><code>-y 444</code> is the chroma subsampling mode. 4:4:4 chroma subsampling tends to provide better compression than 4:2:0 with AVIF, though on some images 4:2:0 chroma subsampling might be the better choice.</li><li><code>cq-level=16</code> is how you specify quality. Lower values correspond to higher quality &amp; filesize, while higher values mean a smaller, lower-quality output is desired. This is preceded by <code>-a</code> because it is an aomenc option, not an avifenc one.</li><li><code>tune=ssim</code> is how the encoder handles RDO (rate-distortion optimization). This may be redundant with the default aomenc parameters, but specifying doesn&#x27;t hurt to avoid an unintended change if a default is modified sometime in the future.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/av1-community-contributors/av1-wiki.github.io/tree/main/docs/encoders/aomenc.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/encoders/x265"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">x265</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/encoders/vpxenc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">vpxenc</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#choosing-forks" class="table-of-contents__link toc-highlight">Choosing forks</a></li><li><a href="#ffmpeg" class="table-of-contents__link toc-highlight">FFmpeg</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#microsoft-windows" class="table-of-contents__link toc-highlight">Microsoft Windows</a></li><li><a href="#macos" class="table-of-contents__link toc-highlight">MacOS</a></li><li><a href="#linux" class="table-of-contents__link toc-highlight">Linux</a></li></ul></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#av1-encoding" class="table-of-contents__link toc-highlight">AV1 Encoding</a></li><li><a href="#avif-encoding" class="table-of-contents__link toc-highlight">AVIF Encoding</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Getting Started</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/prequisites">Prequisites</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/prologue">Prologue</a></li></ul></div><div class="col footer__col"><div class="footer__title">Filtering</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/filtering/Vapoursynth">Vapoursynth</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/filtering/deband">Deband</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/filtering/denoise">Denoise</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/av1-community-contributors/av1-wiki.github.io/tree/main" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/terms-of-use">Terms of Use</a></li><li class="footer__item"><a href="https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Gianni Rosato & contributors. Content licensed under CC BY-SA 4.0. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.77d18074.js"></script>
<script src="/assets/js/main.b40a07c3.js"></script>
</body>
</html>